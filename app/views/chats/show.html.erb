<h2 class="mb-4"><%= @chat.title %></h2>

<div class="border rounded p-3 bg-white" style="height: 400px; overflow-y: auto;">
  <% @messages.each do |msg| %>
    <div class="mb-3">
      <% if msg.role == "user" %>
        <div class="text-end">
          <span class="badge bg-primary">Tú</span>
          <div class="alert alert-primary d-inline-block"><%= simple_format(msg.content) %></div>
        </div>
      <% else %>
        <div>
          <span class="badge bg-success">MediBot</span>
          <div class="alert alert-secondary d-inline-block"><%= simple_format(msg.content) %></div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<hr>

<%= form_with url: ask_chat_path(@chat), local: true, class: "mt-3" do |f| %>
  <div class="mb-3">
    <%= f.label :prompt, "Tu pregunta médica:", class: "form-label fw-semibold" %>
    <%= f.text_area :prompt, rows: 3, class: "form-control", required: true %>
  </div>
  <%= f.submit "Enviar", class: "btn btn-primary" %>
<% end %>
