<div class="dashboard-hero container-xxl">
  <h1 class="display-6 fw-bold mb-1" style="color:var(--primary)">Bienvenido a Hospital IA</h1>
  <p class="text-muted mb-4">Tu asistente médico virtual está listo para ayudarte</p>

  <div class="row g-4 row-cols-1 row-cols-md-3">
    <div class="col">
      <div class="feature-card h-100">
        <div class="feature-icon success">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
            <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Z" stroke="currentColor" stroke-width="1.5"/>
            <path d="M3 21a9 9 0 0 1 18 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="feature-title">Mi Perfil Médico</h3>
        <p class="feature-subtitle">Gestiona tu información médica, alergias y medicamentos</p>
        <div class="d-grid">
          <%= link_to "Ver perfil", patients_profile_path, class: "btn btn-primary" %>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="feature-card h-100">
        <div class="feature-icon warning">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
            <path d="M7 3h7l5 5v13a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"/>
            <path d="M14 3v5h5" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </div>
        <h3 class="feature-title">Análisis Médicos</h3>
        <p class="feature-subtitle">Sube tus análisis para que la IA los interprete</p>
        <div class="d-grid">
          <%= link_to "Subir análisis", new_analysis_path, class: "btn btn-outline-primary" %>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="feature-card h-100">
        <div class="feature-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="5" width="18" height="16" rx="2" stroke="currentColor" stroke-width="1.5"/>
            <path d="M16 3v4M8 3v4M3 10h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="feature-title">Solicitar Cita</h3>
        <p class="feature-subtitle">Agenda tu cita médica completando el formulario</p>
        <div class="d-grid">
          <%= link_to "Agendar cita", new_appointment_path, class: "btn btn-outline-primary" %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-xxl mt-4">
  <div class="row g-4">
    <div class="col-lg-7">
      <div class="card card-list">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="mb-0">Todas las citas</h5>
            <%= link_to "Nueva cita", new_appointment_path, class: "btn btn-sm btn-primary" %>
          </div>

          <% if @appointments&.any? %>
            <ul class="list-group list-group-flush">
              <% @appointments.each do |a| %>
                <li class="list-group-item d-flex align-items-center justify-content-between">
                  <div>
                    <div class="fw-semibold"><%= a.reason %></div>
                    <div class="text-muted small"><%= l a.scheduled_at, format: :long %></div>
                  </div>
                  <div class="d-flex gap-2">
                    <%= link_to "Editar", (edit_appointment_path(a) rescue "#"), class: "btn btn-outline-primary btn-sm" %>
                    <%= link_to "Eliminar", a, data: { turbo_method: :delete, turbo_confirm: "¿Eliminar esta cita?" }, class: "btn btn-outline-danger btn-sm" %>
                  </div>
                </li>
              <% end %>
            </ul>
          <% else %>
            <div class="empty-state">
              <p class="mb-2">No hay citas aún.</p>
              <%= link_to "Agendar cita", new_appointment_path, class: "btn btn-primary btn-sm" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <%= render "patients_profiles/summary_card", profile: @profile %>
    </div>
  </div>
</div>
