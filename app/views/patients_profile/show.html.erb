<div class="container-xxl py-4">

  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h1 class="h3 mb-1" style="color:var(--primary)">Tu Perfil Médico</h1>
      <p class="text-muted mb-0">Completa y mantén actualizada tu información para mejores recomendaciones</p>
    </div>
    <div class="d-flex gap-2">
      <%= link_to "Editar perfil", edit_patients_profile_path, class: "btn btn-outline-primary" %>
      <%= link_to "Eliminar perfil", patients_profile_path,
                  data: { turbo_method: :delete, turbo_confirm: "¿Seguro que deseas eliminar tu perfil médico?" },
                  class: "btn btn-outline-danger" %>
    </div>
  </div>

  <div class="profile-card card border-0 shadow-sm">
    <div class="card-body p-4 p-md-5">

      <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
          <h2 class="h5 mb-1">Información Médica</h2>
          <p class="text-muted mb-0">Completa tu perfil médico para recibir recomendaciones personalizadas</p>
        </div>
        <span class="badge text-bg-light">
          Actualizado: <%= l(@profile.updated_at, format: :short) %>
        </span>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-12 col-md-3">
          <label class="field-label">Edad</label>
          <div class="field-box"><%= @profile.age || "—" %></div>
        </div>
        <div class="col-12 col-md-3">
          <label class="field-label">Género</label>
          <div class="field-box"><%= @profile.gender.presence || "Seleccionar" %></div>
        </div>
        <div class="col-12 col-md-3">
          <label class="field-label">Peso (kg)</label>
          <div class="field-box"><%= @profile.weight ? "#{@profile.weight}" : "Ej: 70.5" %></div>
        </div>
        <div class="col-12 col-md-3">
          <label class="field-label">Altura (cm)</label>
          <div class="field-box"><%= @profile.height ? "#{@profile.height}" : "Ej: 170" %></div>
        </div>
      </div>

      <div class="mb-3">
        <label class="field-label">Alergias</label>
        <div class="field-area"><%= @profile.allergies.presence || "Ej: Penicilina, polen, mariscos…" %></div>
      </div>

      <div class="mb-3">
        <label class="field-label">Condiciones Médicas</label>
        <div class="field-area"><%= @profile.conditions.presence || "Ej: Diabetes tipo 2, hipertensión…" %></div>
      </div>

      <div class="mb-3">
        <label class="field-label">Medicamentos Actuales</label>
        <div class="field-area"><%= @profile.medication.presence || "Ej: Metformina 500mg, Losartán 50mg…" %></div>
      </div>

      <div class="mb-2">
        <label class="field-label">Historia Médica</label>
        <div class="field-area"><%= @profile.medical_history.presence || "Cirugías previas, enfermedades importantes…" %></div>
      </div>

      <div class="d-flex gap-2 mt-4">
        <%= link_to "Editar perfil", edit_patients_profile_path, class: "btn btn-primary" %>
        <%= link_to "Eliminar perfil", patients_profile_path,
                    data: { turbo_method: :delete, turbo_confirm: "¿Seguro que deseas eliminar tu perfil médico?" },
                    class: "btn btn-outline-danger" %>
      </div>

    </div>
  </div>
</div>
